<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>构造函数</title>
  </head>
  <body>
    <script>
      // function Car(color, brand) {
      //   this.color = color
      //   this.brand = brand
      //   return
      // }
      // var car = new Car('black', 'Benz')
      // console.log(car)

      // var a = new Number(1)
      // a.length = 3
      // console.log(a.length) //3

      // var str = 'abc'
      // console.log((str.length = 4))
      // console.log(str.length)

      // var name = 'wenhe'
      // name += 10
      // var type = new String(typeof name)
      // // var type = typeof name  //最后输出undefined
      // if (type.length === 6) {
      //   type.text = 'string'
      // }
      // console.log(type.text) //string

      // function Car(brand, color) {
      //   this.brand = 'brand'
      //   this.color = 'color'
      // }
      // var car = new Car('banz', 'red')
      // console.log(car)

      //作业1.写一个函数，接收任意一个字符串，算出这个字符串的总字节数
      // var str = '我是wenhe'
      // console.log(str.charCodeAt(2))
      // ASCII码前255位的都是只占一个字节，256位以后占2个字节
      // 方法一：
      // function asc(str) {
      //   var sum = 0
      //   for (var i = 0; i < str.length; i++) {
      //     var item = str.charCodeAt(i)
      //     if (item <= 255) {
      //       sum++
      //     } else {
      //       sum += 2
      //     }
      //   }
      //   return sum
      // }
      // console.log(asc('我是wenhe,请多指教123'))

      // 方法二：
      // function asc(str) {
      //   var sum = str.length
      //   for (var i = 0; i < str.length; i++) {
      //     var item = str.charCodeAt(i)
      //     if (item > 255) {
      //       sum++
      //     }
      //   }
      //   return sum
      // }
      // console.log(asc('我是wenhe,请多指教123'))

      // function Compute() {
      //   var res = 0
      //   this.plus = function () {
      //     loop(arguments, 'add', res)
      //   }
      //   this.times = function () {
      //     res = 1
      //     loop(arguments, 'mul', res)
      //   }

      //   function loop(argus, methods, res) {
      //     for (var i = 0; i < argus.length; i++) {
      //       var item = argus[i]
      //       if (methods === 'add') {
      //         res += item
      //       } else if (methods === 'mul') {
      //         res *= item
      //       }
      //     }
      //     console.log(res)
      //   }
      // }
      // var compute = new Compute()
      // compute.plus(1, 2, 3, 4, 5)
      // compute.times(1, 2, 3, 4, 5)

      // function Test() {}
      // Test.prototype.name = 'prototype'
      // var test = new Test()
      // // test.prototype.num = 1//报错
      // console.log(test)

      // 作业：写一个插件，任意传两个数字，调用插件内部的方法可以进行加减乘除功能
      // 方法一
      // ;(function () {
      //   function Compute() {}
      //   Compute.prototype = {
      //     plus: function (opt) {
      //       console.log(opt.num1 + opt.num2)
      //     },
      //     mints: function (opt) {
      //       console.log(opt.num1 - opt.num2)
      //     },
      //     mul: function (opt) {
      //       console.log(opt.num1 * opt.num2)
      //     },
      //     div: function (opt) {
      //       console.log(opt.num1 / opt.num2)
      //     }
      //   }
      //   window.Compute = Compute
      // })()
      // var compute = new Compute()
      // compute.plus({
      //   num1: 6,
      //   num2: 3
      // })
      // compute.mints({
      //   num1: 6,
      //   num2: 3
      // })
      // compute.mul({
      //   num1: 6,
      //   num2: 3
      // })
      // compute.div({
      //   num1: 6,
      //   num2: 3
      // })

      // 方法二
      // ;(function () {
      //   function Compute(opt) {
      //     this.num1 = opt.num1 || 0
      //     this.num2 = opt.num2 || 0
      //   }
      //   Compute.prototype = {
      //     plus: function () {
      //       console.log(this.num1 + this.num2)
      //     },
      //     mints: function () {
      //       console.log(this.num1 - this.num2)
      //     },
      //     mul: function () {
      //       console.log(this.num1 * this.num2)
      //     },
      //     div: function () {
      //       console.log(this.num1 / this.num2)
      //     }
      //   }
      //   window.Compute = Compute
      // })()
      // var compute = new Compute({
      //   num1: 2,
      //   num2: 4
      // })
      // compute.plus()
      // compute.mints()
      // compute.mul()
      // compute.div()

      // function Car() {
      //   this.brand = 'Benz'
      // }
      // Car.prototype = {
      //   brand: 'Mazda',
      //   intro: function () {
      //     console.log('my car is ' + this.brand)
      //   }
      // }
      // var car = new Car()
      // car.intro()
      // car.__proto__.intro()
      // Car.prototype.intro()
      // console.log(Object.prototype.__proto__) //null

      // var test = {
      //   num: 2
      //   // __proto__:Object.prototype
      // }
      // console.log(test.__proto__)
      // function Obj() {}
      // Obj.prototype.num = 1
      // var obj1 = Object.create(test)
      // console.log(obj1.__proto__ == test) //true
      // console.log(test.__proto__ == Object.prototype) //true
      // var obj2 = new Obj()
      // console.log(obj1)
      // console.log(obj2)
      // var obj3 = Object.create(null)
      // console.log(obj3)

      // function Test(brand, color) {
      //   this.color = color
      //   this.brand = brand
      // }
      // function NewTest() {}
      // var newTest = new NewTest()

      // Test.call(newTest, 'Benz', 'red')
      // console.log(newTest)

      // 作业11 两个构造函数， Car() 和 Person(),使用call或者 apply 打印出下面这句话
      // 年龄为多少岁，姓名为XX 买了一辆排量为XX 颜色为XX XX牌子 的车
      // function Car(brand, color, displacement) {
      //   this.brand = brand
      //   this.color = color
      //   this.displacement = displacement
      //   this.info = function () {
      //     return '排量为' + this.displacement + '的' + this.color + this.brand
      //   }
      // }
      // function Person(opt) {
      //   Car.apply(this, [opt.brand, opt.color, opt.displacement])
      //   this.name = opt.name
      //   this.age = opt.age
      //   this.say = function () {
      //     console.log(this.age + '岁的' + this.name + '买了一辆' + this.info())
      //   }
      // }
      // var p = new Person({
      //   name: 'zs',
      //   age: '29',
      //   brand: 'Benz',
      //   color: 'pink',
      //   displacement: '3.0'
      // })
      // p.say()

      // 创建中间构造函数Buffer() 来过渡继承
      // function Teacher() {
      //   this.name = 'zhang'
      //   this.wife = 'zl'
      // }
      // Teacher.prototype = {
      //   tSkill: 'Java'
      // }
      // var t = new Teacher()

      // function Student() {
      //   this.name = 'liu'
      // }
      // function Buffer() {}
      // Buffer.prototype = Teacher.prototype
      // var buffer = new Buffer()

      // Student.prototype = buffer
      // var s = new Student()
      // Student.prototype.age = 30
      // console.log(t)
      // console.log(s)
      // console.log(s.wife) //undefined

      // 封装下Buffer
      // function inherit(Target, Origin) {
      //   function Buffer() {}
      //   Buffer.prototype = Origin.prototype
      //   Target.prototype = new Buffer()
      //   Target.prototype.constructor = Target
      //   Target.prototype.super_class = Origin
      // }
      // 企业级写法
      // var inherit = (function () {
      //   var Buffer = function () {}
      //   return function (Target, Origin) {
      //     Buffer.prototype = Origin.prototype
      //     Target.prototype = new Buffer()
      //     Target.prototype.constructor = Target
      //     Target.prototype.super_class = Origin
      //   }
      // })()
      // Teacher.prototype = {
      //   TSkill: 'Java'
      // }
      // function Teacher() {
      //   this.name = 'ZS'
      // }
      // function Student() {
      //   this.name = 'LS'
      // }
      // inherit(Student, Teacher)
      // var t = new Teacher()
      // var s = new Student()
      // Student.prototype.age = 18

      // console.log(s)
      // console.log(t)

      // var obj = {
      //   morning: function () {
      //     console.log('running')
      //     return this
      //   },
      //   afternoon: function () {
      //     console.log('eatting')
      //     return this
      //   }
      // }
      // obj.morning().afternoon()

      // var obj = {
      //   No1: 'HTML',
      //   No2: 'CSS',
      //   myObj: function (num) {
      //     console.log(this['No' + num])
      //   }
      // }
      // obj.myObj(1)
      // obj.myObj(2)

      // var arr = [1, 2, 3, 4, 5]
      // for (var i in arr) {
      //   console.log(i, arr[i])
      // }

      // function Car() {
      //   this.brand = 'Benz'
      //   this.color = 'pink'
      // }
      // var car = new Car()
      // Car.prototype.width = 6
      // Object.prototype.name = 'zs'
      // Car.prototype.say = function () {
      //   console.log(123)
      // }

      // for (var key in car) {
      //   // console.log(key + '---' + car[key])
      //   if (car.hasOwnProperty(key)) {
      //     console.log(key + ':' + car[key])
      //   }
      // }
      // var a = []
      // console.log(a instanceof Array) //true
      // console.log(Object.prototype.toString.call(a) === '[object Array]') //true
      // console.log(a.constructor === Array) //true
      // console.log(Array.isArray(a)) // true
      // console.log(a.__proto__ === Array.prototype) // true
      // console.log(Object.getPrototypeOf(a) === Array.prototype) // true
      // console.log(Array.prototype.isPrototypeOf(a)) // true

      // var getSum = (function (n) {
      //   if (n <= 1) {
      //     return 1
      //   }
      //   return n * arguments.callee(n - 1)
      // })(5)
      // console.log(getSum) //120

      // function fn1() {
      //   fn2()
      // }
      // function fn2() {
      //   console.log(fn2.caller) // function fn1(){ ... }
      // }
      // fn1()

      // 'use strict'
      // function test() {
      //   this.a = 1
      //   console.log(this.a) //报错
      // }
      // test()

      /*
      作业：模块化开发，实现以下功能：
      功能1：打印一个参数值以内能被3或5或7整除的数
      功能2：打印斐波那契数列的第N位
      功能3：打印从0-N的累加和
      */

      // window.onload = function () {
      //   init()
      // }
      // function init() {
      //   console.log(initFb(8))
      //   console.log(initDiv(100))
      //   console.log(initSum(100))
      // }
      // var initFb = (function () {
      //   function getFb(n) {
      //     var num1 = 1,
      //       num2 = 1,
      //       num3 = 0
      //     if (n <= 2) {
      //       return 1
      //     }
      //     for (var i = 3; i <= n; i++) {
      //       num3 = num1 + num2
      //       num1 = num2
      //       num2 = num3
      //     }
      //     return num3
      //   }
      //   return getFb
      // })()

      // var initDiv = (function () {
      //   function getDiv(n) {
      //     var arr = []
      //     for (var i = 1; i < n; i++) {
      //       if (i % 3 == 0 || i % 5 == 0 || i % 7 == 0) {
      //         arr.push(i)
      //       }
      //     }
      //     return arr
      //   }
      //   return getDiv
      // })()

      // var initSum = (function () {
      //   function getSum(n) {
      //     var sum = 0
      //     for (var i = 0; i <= n; i++) {
      //       sum += i
      //     }
      //     return sum
      //   }
      //   return getSum
      // })()

      // var obj = {
      //   name: 'zs',
      //   age: 18
      // }
      // var newObj = {}
      // for (var key in obj) {
      //   newObj[key] = obj[key]
      // }
      // obj.age = 20
      // console.log(obj, newObj)

      // 浅拷贝和深拷贝
      // Object.prototype.num = 1
      // var obj = {
      //   name: 'zs',
      //   age: 38,
      //   chindren: {
      //     first: {
      //       name: 'one',
      //       age: 10,
      //       like: function () {
      //         var likes = 3
      //         console.log('read', likes)
      //       }
      //     },
      //     second: {
      //       name: 'two',
      //       age: 7,
      //       like: function () {
      //         var likes = 4
      //         console.log('sleep', likes)
      //       }
      //     },
      //     third: {
      //       name: 'three',
      //       age: 3,
      //       like: function () {
      //         var likes = 2
      //         console.log('talk', likes)
      //       }
      //     }
      //   },
      //   car: ['Benz', 'Mazda']
      // }
      // // var newObj = clone(obj, newObj)
      // var newObj = deepClone(obj, newObj)
      // obj.age = 36
      // newObj.age = 34
      // obj.chindren.first.age = 13
      // newObj.chindren.fourth = {
      //   name: 'four',
      //   age: 1,
      //   like: function () {
      //     var likes = 5
      //     console.log('bot')
      //   }
      // }
      // console.log(obj, newObj)

      // 浅拷贝
      // origin是被拷贝的对象, target是拷贝的对象
      // function clone(origin, target) {
      //   var target = target || {}
      //   for (var key in origin) {
      //     if (origin.hasOwnProperty(key)) {
      //       target[key] = origin[key]
      //     }
      //   }
      //   return target
      // }

      // 深拷贝
      // 其实就是判断键值是不是引用值，是的话就调用自己把引用值再拷贝一遍
      // function deepClone(origin, target) {
      //   var target = target || {}
      //   var toStr = Object.prototype.toString
      //   for (var key in origin) {
      //     if (origin.hasOwnProperty(key)) {
      //       if (typeof origin[key] === 'object' && origin[key] !== null) {
      //         if (toStr.call() === '[object Array]') {
      //           target[key] = []
      //         } else {
      //           target[key] = {}
      //         }
      //         deepClone(origin[key], target[key])
      //       } else {
      //         target[key] = origin[key]
      //       }
      //     }
      //   }
      //   return target
      // }

      function Foo() {
        getName = function () {
          console.log(1)
        }
        return this
      }
      Foo.getName = function () {
        console.log(2)
      }

      Foo.prototype.getName = function () {
        console.log(3)
      }
      var getName = function () {
        console.log(4)
      }
      function getName() {
        console.log(5)
      }
      Foo.getName() //2
      getName() //4
      Foo().getName() //4  X  =1
      new Foo.getName() //2
      new Foo().getName() //3
      new new Foo().getName() //3
    </script>
  </body>
</html>
